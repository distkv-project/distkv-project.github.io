<!DOCTYPE html>
<html lang="en">

<head>
	<meta charset="UTF-8">
	<meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
	<meta name="keywords" content="command_guide" />
	<meta name="description" content="command_guide" />
	<!-- 网页标签标题 -->
	<title>command_guide</title>
	<link rel="shortcut icon" href="/product/img/docsite.ico"/>
	<link rel="stylesheet" href="/product/build/documentation.css" />
</head>
<body>
	<div id="root"><div class="documentation-page" data-reactroot=""><header class="header-container header-container-normal"><div class="header-body"><a href="/product/en-us/index.html"><img class="logo" src="/product/img/distkv-logo.png"/></a><span class="language-switch language-switch-normal">中</span><div class="header-menu"><img class="header-menu-toggle" src="/product/img/system/menu_gray.png"/><ul><li class="menu-item menu-item-normal"><a href="/product/en-us/index.html" target="_self">HOME</a></li><li class="menu-item menu-item-normal menu-item-normal-active"><a href="/product/en-us/docs/index.html" target="_self">DOCS</a></li><li class="menu-item menu-item-normal"><a href="/product/en-us/docs/download.html" target="_self">DOWNLOAD</a></li><li class="menu-item menu-item-normal"><a href="/product/en-us/blog/index.html" target="_self">BLOG</a></li><li class="menu-item menu-item-normal"><a href="/product/en-us/community/index.html" target="_self">COMMUNITY</a></li></ul></div></div></header><div class="bar"><div class="bar-body"><img src="/product/img/system/docs.png" class="front-img"/><span>Documentation</span><img src="/product/img/system/docs.png" class="back-img"/></div></div><section class="content-section"><div class="sidemenu"><div class="sidemenu-toggle"><img src="https://img.alicdn.com/tfs/TB1E6apXHGYBuNjy0FoXXciBFXa-200-200.png"/></div><ul><li class="menu-item menu-item-level-1"><span>catalog</span><ul><li style="height:36px;overflow:hidden" class="menu-item menu-item-level-2"><a href="/product/en-us/docs/index.html" target="_self">index</a></li><li style="height:36px;overflow:hidden" class="menu-item menu-item-level-2"><a href="/product/en-us/docs/install.html" target="_self">install</a></li><li style="height:36px;overflow:hidden" class="menu-item menu-item-level-2"><a href="/product/en-us/docs/download.html" target="_self">download</a></li><li style="height:108px;overflow:hidden" class="menu-item menu-item-level-2"><span>user guide<img style="transform:rotate(0deg)" class="menu-toggle" src="/product/img/system/arrow_down.png"/></span><ul><li class="menu-item menu-item-level-3"><a href="/product/en-us/docs/command_guide.html" target="_self">command guide</a></li><li class="menu-item menu-item-level-3"><a href="/product/en-us/docs/details/ErrorCode.html" target="_self">error code</a></li></ul></li><li style="height:72px;overflow:hidden" class="menu-item menu-item-level-2"><span>new features<img style="transform:rotate(0deg)" class="menu-toggle" src="/product/img/system/arrow_down.png"/></span><ul><li class="menu-item menu-item-level-3"><a href="/product/en-us/docs/pine.html" target="_self">pine</a></li></ul></li><li style="height:108px;overflow:hidden" class="menu-item menu-item-level-2"><span>talk<img style="transform:rotate(0deg)" class="menu-toggle" src="/product/img/system/arrow_down.png"/></span><ul><li class="menu-item menu-item-level-3"><a href="/product/en-us/docs/overview/faq.html" target="_self">faq</a></li><li class="menu-item menu-item-level-3"><a href="/product/en-us/docs/overview/what-is-distkv.html" target="_self">What is distkv</a></li></ul></li><li style="height:36px;overflow:hidden" class="menu-item menu-item-level-2"><a href="/product/en-us/docs/contributors.html" target="_self">contributors</a></li></ul></li></ul></div><div class="doc-content markdown-body"><h2 id="introduction">Introduction <a class="header-anchor" href="#introduction">#</a></h2>
<p>Distkv is a type-oriented database system. There are several concepts in Distkv that looks like the basic collections.
We have 6 concepts <code>string</code>, <code>list</code>, <code>set</code>, <code>dict</code>, <code>sortedlist</code> and <code>table</code> yet.</p>
<p>In this section, you will learn the grammer of these basic concepts in Distkv, and will learn how to use these concepts as examples as well.</p>
<h2 id="1.-string-concept">1. String Concept <a class="header-anchor" href="#1.-string-concept">#</a></h2>
<p>Put a string value into Distkv store.</p>
<pre><code class="language-bash">str.put key value
</code></pre>
<p>example:</p>
<pre><code class="language-bash">$ dkv-cli &gt; str.put k1 v1
$ dkv-cli &gt; ok
</code></pre>
<p>Get a string value from Distkv store.</p>
<pre><code class="language-bash">str.get key
</code></pre>
<p>example:</p>
<pre><code class="language-bash">dkv-cli &gt; str.get k1
dkv-cli &gt; v1
</code></pre>
<p>Drop a string value from Distkv store.</p>
<pre><code class="language-bash">str.drop key
</code></pre>
<p>example:</p>
<pre><code class="language-bash">dkv-cli &gt; str.drop k1
dkv-cli &gt; ok

dkv-cli &gt; str.get k1
dkv-cli &gt; errorCode: A100;
 Detail: The key k1 is not found <span class="hljs-keyword">in</span> the store.
</code></pre>
<h2 id="2.-list-concept">2. List Concept <a class="header-anchor" href="#2.-list-concept">#</a></h2>
<p>Put a list into Distkv store.</p>
<pre><code class="language-bash">list.put key value1 [value2 [value3 [...]]]
</code></pre>
<p>example:</p>
<pre><code class="language-bash">dkv-cli &gt; list.put k1 v1 v2 v3
dkv-cli &gt; ok
</code></pre>
<p>Get a list from Distkv store.</p>
<pre><code class="language-bash">list.get key
</code></pre>
<p>example:</p>
<pre><code class="language-bash">dkv-cli &gt; list.get k1
dkv-cli &gt; [v1, v2, v3]
</code></pre>
<p>Get a range of items of the list from Distkv store.</p>
<pre><code class="language-bash"><span class="hljs-comment"># Note that it's excluding the `end_index`.</span>
list.get key from_index end_index
</code></pre>
<p>example:</p>
<pre><code class="language-bash">dkv-cli &gt; list.get k1 0 2
dkv-cli &gt; [v1, v2]
</code></pre>
<p>Get one item of the list from Distkv store.</p>
<pre><code class="language-bash">list.get key index
</code></pre>
<p>example:</p>
<pre><code class="language-bash">dkv-cli &gt; list.get k1 1
dkv-cli &gt; v1
</code></pre>
<p>Put items into the front of the list.</p>
<pre><code class="language-bash">list.lput key value1 [value2 [value3 [...]]]
</code></pre>
<p>example:</p>
<pre><code class="language-bash">dkv-cli &gt; list.lput <span class="hljs-string">"k1"</span> <span class="hljs-string">"v4"</span> <span class="hljs-string">"v5"</span> <span class="hljs-string">"v6"</span>
dkv-cli &gt; ok
</code></pre>
<p>Put items into the back of the list.</p>
<pre><code class="language-bash">list.rput key value1 [value2 [value3 [...]]]
</code></pre>
<p>example:</p>
<pre><code class="language-bash">dkv-cli &gt; list.rput <span class="hljs-string">"k1"</span> <span class="hljs-string">"v7"</span>
dkv-cli &gt; ok
</code></pre>
<p>Remove item from the list with the given index.</p>
<pre><code class="language-bash">list.ldel key index
</code></pre>
<p>example:</p>
<pre><code class="language-bash">dkv-cli &gt; list.ldel <span class="hljs-string">"k1"</span> 2
dkv-cli &gt; ok
</code></pre>
<p>Remove item from the back of the list with the given back index.</p>
<pre><code class="language-bash">list.rdel key back_index
</code></pre>
<p>If the list is [1, 2, 3] and the given number is 0, item <code>3</code> will be removed.</p>
<p>example:</p>
<pre><code class="language-bash">dkv-cli &gt; list.rdel <span class="hljs-string">"k1"</span> 2
dkv-cli &gt; ok
</code></pre>
<p>Get the list from Distkv store.</p>
<pre><code class="language-bash">list.get key
</code></pre>
<p>example:</p>
<pre><code class="language-bash">dkv-cli &gt; list.get <span class="hljs-string">"k1"</span>
dkv-cli &gt; [<span class="hljs-string">"v6"</span>, <span class="hljs-string">"v1"</span>, <span class="hljs-string">"v2"</span>]
</code></pre>
<h2 id="3.-set-concept">3. Set concept <a class="header-anchor" href="#3.-set-concept">#</a></h2>
<pre><code class="language-bash">dkv-cli &gt; set.put <span class="hljs-string">"k1"</span> <span class="hljs-string">"v1"</span> <span class="hljs-string">"v2"</span> <span class="hljs-string">"v3"</span>
dkv-cli &gt; ok

dkv-cli &gt; set.get <span class="hljs-string">"k1"</span>
dkv-cli &gt; {<span class="hljs-string">"v1"</span>, <span class="hljs-string">"v2"</span>, <span class="hljs-string">"v3"</span>}

dkv-cli &gt; set.del <span class="hljs-string">"k1"</span> <span class="hljs-string">"v1"</span>
dkv-cli &gt; ok

dkv-cli &gt; set.get <span class="hljs-string">"k1"</span>
dkv-cli &gt; {<span class="hljs-string">"v2"</span>, <span class="hljs-string">"v3"</span>}

dkv-cli &gt; set.exists <span class="hljs-string">"k1"</span> <span class="hljs-string">"v2"</span>
dkv-cli &gt; <span class="hljs-literal">true</span>

dkv-cli &gt; set.exists <span class="hljs-string">"k1"</span> <span class="hljs-string">"v4"</span>
dkv-cli &gt; <span class="hljs-literal">false</span>

dkv-cli &gt; set.drop <span class="hljs-string">"k1"</span>
dkv-cli &gt; ok
</code></pre>
<h2 id="4.-dict-concept">4. Dict concept <a class="header-anchor" href="#4.-dict-concept">#</a></h2>
<pre><code class="language-bash">dkv-cli &gt; dict.put <span class="hljs-string">"dict1"</span> <span class="hljs-string">"k1"</span> <span class="hljs-string">"v1"</span> <span class="hljs-string">"k2"</span> <span class="hljs-string">"v2"</span>
dkv-cli &gt; ok

dkv-cli &gt; dict.get <span class="hljs-string">"dict1"</span>
dkv-cli &gt; { <span class="hljs-string">"k1"</span> : <span class="hljs-string">"v1"</span>, <span class="hljs-string">"k2"</span> : <span class="hljs-string">"v2"</span>}

dkv-cli &gt; dict.get <span class="hljs-string">"dict1"</span> <span class="hljs-string">"k1"</span>
dkv-cli &gt; <span class="hljs-string">"v1"</span>

dkv-cli &gt; dict.get <span class="hljs-string">"dict1"</span> <span class="hljs-string">"k1"</span>
dkv-cli &gt; <span class="hljs-string">"v1"</span>

dkv-cli &gt; dict.del <span class="hljs-string">"dict1"</span> <span class="hljs-string">"k1"</span>
dkv-cli &gt; ok

dkv-cli &gt; dict.pop <span class="hljs-string">"dict1"</span> <span class="hljs-string">"k2"</span>
dkv-cli &gt; <span class="hljs-string">"v2"</span>

dkv-cli &gt; dict.get <span class="hljs-string">"dict1"</span>
dkv-cli &gt; []

dkv-cli &gt; dict.drop <span class="hljs-string">"dict1"</span>
dkv-cli &gt; ok
</code></pre>
<h2 id="5.-sortedlist-concept">5. SortedList Concept <a class="header-anchor" href="#5.-sortedlist-concept">#</a></h2>
<pre><code class="language-bash">dkv-cli &gt; slist.put <span class="hljs-string">"slist1"</span> <span class="hljs-string">"m12"</span> 12 <span class="hljs-string">"m2"</span> 2 <span class="hljs-string">"m5"</span> 5
dkv-cli &gt; ok

dkv-cli &gt; slist.top <span class="hljs-string">"slist1"</span> 2
dkv-cli &gt; [(<span class="hljs-string">"m12"</span>, 12), (<span class="hljs-string">"m5"</span>, 5)]

dkv-cli &gt; slist.incrScore <span class="hljs-string">"slist1"</span> <span class="hljs-string">"m5"</span> 10
dkv-cli &gt; ok

dkv-cli &gt; slist.putMember <span class="hljs-string">"slist1"</span> <span class="hljs-string">"m9"</span> 13
dkv-cli &gt; ok

dkv-cli &gt; slist.removeMember <span class="hljs-string">"slist1"</span> <span class="hljs-string">"m9"</span>
dkv-cli &gt; ok

dkv-cli &gt; slist.top <span class="hljs-string">"slist1"</span> 2
dkv-cli &gt; [(<span class="hljs-string">"m5"</span>, 15), (<span class="hljs-string">"m12"</span>, 12)]

dkv-cli &gt; slist.getMember <span class="hljs-string">"slist1"</span> <span class="hljs-string">"m12"</span>
dkv-cli &gt; (<span class="hljs-string">"m12"</span>, 12), 2nd

dkv-cli &gt; slist.drop <span class="hljs-string">"slist1"</span>
dkv-cli &gt; ok
</code></pre>
<h2 id="6.-table-concept">6. Table concept <a class="header-anchor" href="#6.-table-concept">#</a></h2>
<ol>
<li>Define your data structure in a schema file named <code>mytables.sc</code></li>
</ol>
<pre><code class="language-shell">table TaskTable {
  [p]task_id: string;
  [i]driver_id: string;
  task_name: string;
  return_num: int;
  arguments: [string];
}
</code></pre>
<pre><code class="language-shell">table DriverTable {
 [p]driver_id: string;
 driver_name: string;
 actor_num: int;
};
</code></pre>
<ol start="2">
<li>Start an distkv server and execute this command to create table:</li>
</ol>
<pre><code class="language-shell"><span class="hljs-meta">&gt;</span><span class="bash"> dkv-cli -p 12344 <span class="hljs-comment"># connect to distkv server</span></span>
<span class="hljs-meta">&gt;</span><span class="bash"> create TaskTable, DriverTable from mytables.sc</span>
</code></pre>
<ol start="3">
<li>Add data to the table:</li>
</ol>
<pre><code class="language-shell"><span class="hljs-meta">&gt;</span><span class="bash"> TaskTable.add <span class="hljs-string">"00001"</span>, <span class="hljs-string">"22222"</span>, <span class="hljs-string">"my_task"</span>, 3, [<span class="hljs-string">"1"</span>, <span class="hljs-string">"2"</span>]</span>
&lt; ok
<span class="hljs-meta">&gt;</span><span class="bash"> TaskTable.add <span class="hljs-string">"00002"</span>, <span class="hljs-string">"99999"</span>, <span class="hljs-string">"my_task"</span>, 3, [<span class="hljs-string">"1"</span>, <span class="hljs-string">"2"</span>]</span>
&lt; ok
<span class="hljs-meta">&gt;</span><span class="bash"> TaskTable.add <span class="hljs-string">"00003"</span>, <span class="hljs-string">"22222"</span>, <span class="hljs-string">"my_task"</span>, 3, [<span class="hljs-string">"1"</span>, <span class="hljs-string">"2"</span>]</span>
&lt; ok
<span class="hljs-meta">&gt;</span><span class="bash"> DriverTable.add <span class="hljs-string">"22222"</span>, <span class="hljs-string">"my_driver"</span>, 10</span>
&lt; ok
</code></pre>
<ol start="4">
<li>Query all tasks by driver id:</li>
</ol>
<pre><code class="language-shell"><span class="hljs-meta">&gt;</span><span class="bash"> TaskTable.query (*) when driver_id == <span class="hljs-string">"22222"</span></span>
&lt;
&lt; task_id      driver_id     task_name      num_return      arguments
&lt; "00001"      "22222"       "my_task"      3               ["1", "2"]
&lt; "00003"      "22222"       "my_task"      3               ["1", "2"]
&lt; 2 records
</code></pre>
</div></section><footer class="footer-container"><div class="footer-body"><img src="/product/img/distkv_gray.png"/><div class="cols-container"><div class="col col-12"><h3>Getting Involved</h3><p>Thank you for your attention to the Distkv project. If you have any questions, you can create a new issue in our github issues list. </p></div><div class="col col-6"><dl><dt>Documentation</dt><dd><a href="/product/en-us/docs/index.html" target="_self">Overview</a></dd><dd><a href="/product/en-us/docs/install.html" target="_self">Install</a></dd><dd><a href="/product/en-us/docs/download.html" target="_self">Download</a></dd></dl></div><div class="col col-6"><dl><dt>Resources</dt><dd><a href="/product/en-us/blog/index.html" target="_self">Blog</a></dd><dd><a href="/product/en-us/community/index.html" target="_self">Community</a></dd></dl></div></div><div class="copyright"><span></span></div></div></footer></div></div>
	<script src="https://f.alicdn.com/react/15.4.1/react-with-addons.min.js"></script>
	<script src="https://f.alicdn.com/react/15.4.1/react-dom.min.js"></script>
	<script>
		window.rootPath = '/product';
  </script>
	<script src="/product/build/documentation.js"></script>
</body>
</html>